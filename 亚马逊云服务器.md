# 建立和连接云端服务器

## 注册
aws.amazon.com  
正常注册就可以。可以获得一年期的基本款免费试用。
可能的问题：需要填银行卡信息。常见的信用卡应该都可以。

## 服务器设置
* 在右上角选择地区，尽量选择与自己物理距离较近的。
* 服务-计算-EC2，点中间的启动实例按钮。
  1. 选择AMI，也就是搭配好的系统设置(系统镜像)，相当于别人安装好的系统(其中还装了一些软件)直接拷贝一份过来。
    左侧菜单栏社区AMI，勾选Ubuntu系统-64位-EBS。在列表里选一个Canonical Ubuntu14.04，虚拟化类型是hvm的就可以。
    AMI的选择范围与启动实例的地区有关。
  2. 选择实例类型，直接默认的(符合条件的免费套餐)。
    免费试用的选择余地比较小，只能1vCPU 1G内存，一般选t2.micro。
    实际用于生信分析，建议计算优化系列的8vCPU，16G内存(c5.2xlarge)。
  3. 配置实例可跳过
  4. 添加存储：免费用户最多30G，一般选20G就可以，自己看着来。
    可能的问题：默认给出的大小已经超过30G，一般是由于选择的镜像太大，跳回第一步重新选AMI，注意不要选深度学习的因为这种一般都很大。
  5. 添加标签可跳过
  6. 配置安全组：第一次可以创建新的，之后从列表里选自己之前创建的就可以。

    类型| 协议 | 端口范围 | 来源
    ----|------|---------|--------------
    SSH | TCP | 22 |自定义 0.0.0.0/0
    HTTPS| TCP |443 |任何位置 0.0.0.0/0, ::/0
    自定义TCP规则|TCP|8888|任何位置 0.0.0.0/0, ::/0
  7. 审核：可能有安全警告(可以从任何ip地址访问)，不用管，点右下角启动就可以。
* 密钥  
    第一次需要添加新的密钥，输入一个名称(比如mykey)然后点下载就可以，在电脑里找到下载的文件(mykey.pem)，转存到桌面或者其他方便的地方。  
    每次连接都需要使用密钥，因此确认保存在方便安全的地方。如果丢了下次只能再添加一个新的了。第二次之后使用就可以用之前存的密钥了，先确保找得到，再够下面的框继续，否则即使实例启动了，没有密钥也无法连接。  
* 正常点下去(查看实例)，就可以在控制台中看到实例在初始化了。

## 用本地电脑连接到服务器
本地电脑系统不同的情况下连接方法不一样。  
具体可以：
* 第一次用时亚马逊会自动给出新手教程
* 点控制台上部的连接按钮，会出现一个简易教程
* 看[帮助文档](https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/EC2_GetStarted.html#ec2-connect-to-instance-linux)
命令行开头显示Ubuntu@xxx.xxx.xx.xx的时候就是已经连接成功了。

## 使用完成后
免费套餐的每月750小时足够用了(如果不同时运行多个实例的话)。但从养成好习惯的角度，暂时用完之后保存好文件，在控制台点操作-实例状态-停止，这种情况下之后可以重新启动，已保存的文件不会丢失。彻底完成后在控制台点操作-实例状态-终止，这时会删除整个根目录。



